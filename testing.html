<html>
    <head>
        <title>test</title>
        <style>
          body{
            overflow: hidden;
            margin: 0
          }
        </style>
        <script src="one.js"></script>
        <script src="three.js"></script>
        <script src="orbit.js"></script>
    </head>
    <body>
        <div id="canvas"></div>

        <script>
            var sp = new SinglePoint([1, 1, 0], [0, 1, 0], [180, 1, 0, 0, "A"])
            var sg = new Segment([0, 0, 0], [10, 0, 0], [0, 0, 0], [0, 1, 0, 0, "A"])
            var tr = new Tria([0, 0, 0], [10, 0, 0], [0, 10, 0], [0, 0, 0], [0, 1, 0, 0, "A"])
            var qu = new Quad([0, 0, 0], [10, 0, 0], [0, 10, 0], [10, 10, 0], [0, 0, 0], [0, 1, 0, 0, "A"])
            var box = new Box(10, 10, 10, [0, 5, 0], [0, 1, 0, 0, "A"])
            var poly = new Polygon(50, 5, [10,5,0], [0,0,0],[45, 1, 0, 0, "A"])
            var cyli = new Cylinder(8, 5, 10, [0,10,5], [45, 1, 0, 0, "A"])


        </script>
        <script>
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            var renderer = new THREE.WebGLRenderer();
            var trackball = new THREE.OrbitControls(camera, renderer.domElement);
            var gridhelper = new THREE.GridHelper(20,1);
            scene.add(gridhelper)
            var axishelper = new THREE.AxisHelper(10,10,10);
            scene.add(axishelper)

            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(new THREE.Color(0xEEEEEE, 1.0));
            camera.position.z = -50;
            var ambientlight = new THREE.AmbientLight(0x404040);
            var directionlight = new THREE.DirectionalLight(0xffffff);
            directionlight.lookAt(0, 0, 0);
            scene.add(directionlight);
            scene.add(ambientlight);
            document.getElementById("canvas").appendChild(renderer.domElement);

            var points = new THREE.PointCloud();
            var vertices = [];
            var newgeo = new THREE.Geometry();
            var material = new THREE.MeshBasicMaterial({color:0X00C3C3, transparent:true, opacity: 0.2})
            var geo = new THREE.BufferGeometry();

            function render() {
                requestAnimationFrame(render);
                renderer.render(scene, camera);
                trackball.update();
            }

            var buffer = new Float32Array(poly.arrayBuffer.length)
            for (var i=0; i< poly.arrayBuffer.length; i++){
              buffer[i] = poly.arrayBuffer[i];
            }
            geo.addAttribute('position', new THREE.BufferAttribute(buffer,3));
            var mesh = new THREE.Mesh(geo, material);


            for (var i = 0; i < poly.arrayBuffer.length/3; i++) {
                var x = poly.arrayBuffer[(i + 1) * 3 - 3]
                var y = poly.arrayBuffer[(i + 1) * 3 - 2]
                var z = poly.arrayBuffer[(i + 1) * 3 - 1]
                var vertice = new THREE.Vector3(x, y, z)
                vertices.push(vertice);
            }
            points.geometry = newgeo;
            newgeo.vertices = vertices;
            scene.add(points);
            scene.add(mesh);
            render();
        </script>

    </body>
</html>
